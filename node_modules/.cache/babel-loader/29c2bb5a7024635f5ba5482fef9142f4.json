{"ast":null,"code":"var _jsxFileName = \"/home/sourab/projects/React-JS-Three-JS-Boilerplate/src/Scenes/MainScene.component.js\";\nimport React from 'react';\nimport * as THREE from 'three';\nimport MetalSphere from '../Components/3D/MetalSphere.three';\nimport Loading from './../Components/Loading.component';\nimport { handleSceneResize, initEventListener } from './../Utils/sceneResize';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { Coordinates } from '../Coordinates';\nimport fragment from '../shaders/fragment.glsl';\nimport vertex from '../shaders/vertex.glsl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class MainScene extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.initScene = () => {\n      //init Loading Manager\n      const loadingManager = new THREE.LoadingManager();\n\n      loadingManager.onLoad = () => {\n        this.setState({\n          loading: false\n        }, () => {});\n      }; //init Renderer\n\n\n      this.renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true\n      });\n      this.renderer.setPixelRatio(window.devicePixelRatio);\n      this.renderer.autoClear = false;\n      this.renderer.setClearColor(new THREE.Color(0x222222));\n      this.renderer.setSize(this.divRef.current.offsetWidth, this.divRef.current.offsetHeight);\n      this.divRef.current.appendChild(this.renderer.domElement); //init Scene\n\n      this.scene = new THREE.Scene();\n      this.scene.background = new THREE.Color(0x222222); //init Camera\n\n      this.camera = new THREE.PerspectiveCamera(7, this.divRef.current.offsetWidth / this.divRef.current.offsetHeight, 0.1, 1000);\n      this.camera.position.x = 30;\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement); //Metal Sphere\n\n      this.material = new THREE.ShaderMaterial({\n        extensions: {\n          derivatives: \"#extension GL_OES_standard_dervatives: enabled\"\n        },\n        side: THREE.DoubleSide,\n        uniforms: {\n          time: {\n            value: 0\n          },\n          resolution: {\n            value: new THREE.Vector4()\n          }\n        },\n        transparent: true,\n        vertexShader: vertex,\n        fragmentShader: fragment\n      });\n      let sphere = new MetalSphere().create(loadingManager);\n      this.scene.add(sphere);\n      this.plane = new THREE.Mesh(this.geometry, this.material);\n      this.scene.add(this.plane);\n\n      play = () => {\n        if (!this.isPlaying) {\n          this.render();\n          this.isPlaying = true;\n        }\n      }; //Ambient Light\n\n\n      let ambientLight = new THREE.AmbientLight(0xFFFFFF);\n      ambientLight.intensity = 1;\n      this.scene.add(ambientLight);\n      let hemiLight = new THREE.HemisphereLight(0xffeeb1, 0x080820, 4);\n      this.scene.add(hemiLight); //Directional Light\n\n      let directionalLight = new THREE.DirectionalLight(0xe8f7ff, 4);\n      directionalLight.position.set(5, 15, 70);\n      this.scene.add(directionalLight); //SpotLight\n\n      let light = new THREE.SpotLight(0xffa95c, 4);\n      light.position.set(-50, 50, 50);\n      light.castShadow = true;\n      this.scene.add(light); //pin\n      // let mesh = new THREE.Mesh(\n      //     new THREE.SphereBufferGeometry(0.01, 1, 1),\n      //     new THREE.MeshBasicMaterial({color:\"#fc4ee8\"})\n      // )\n      // let mesh1 = new THREE.Mesh(\n      //     new THREE.SphereBufferGeometry(0.01, 1, 1),\n      //     new THREE.MeshBasicMaterial({color:0x00ff00})\n      // )\n\n      function Conversion(lat, lng) {\n        let phi = (90 - lat) * (Math.PI / 180);\n        let theta = (lng + 180) * (Math.PI / 180);\n        let x = -(Math.sin(phi) * Math.cos(theta));\n        let y = Math.sin(phi) * Math.sin(theta);\n        let z = Math.cos(phi);\n        return {\n          x,\n          y,\n          z\n        };\n      } // let point1 = {\n      //     lat:35.6897,\n      //     lng:139.6922\n      // }\n      // let point2 = {\n      //     lat:18.9667,\n      //     lng:72.8333\n      // }\n\n\n      for (let i = 0; i < Coordinates.length; i++) {\n        let pos = Conversion(Coordinates[i].lat, Coordinates[i].lng);\n        let mesh = new THREE.Mesh(new THREE.SphereBufferGeometry(0.01, 1, 1), new THREE.MeshBasicMaterial({\n          color: \"#fc4ee8\"\n        }));\n        mesh.position.set(pos.x, pos.y, pos.z);\n        this.scene.add(mesh);\n\n        if (i < Coordinates.length - 1) {\n          let pos1 = Conversion(Coordinates[i + 1].lat, Coordinates[i + 1].lng);\n          this.ConnectingLines(pos, pos1);\n        }\n      } // let pos = Conversion(point1);\n      // let pos1 = Conversion(point2);\n      // mesh.position.set(pos.x, pos.y, pos.z)\n      // this.scene.add(mesh)\n      // mesh1.position.set(pos1.x,pos1.y,pos1.z)\n      // this.scene.add(mesh1)\n      //this.ConnectingLines(pos,pos1)\n      //init Handle Resize\n\n\n      handleSceneResize(window, this.camera, this.renderer);\n      initEventListener(window); //Animation Loop\n\n      const stop = () => {\n        this.isPlaying = false;\n      };\n\n      stop(); // const \n      // play();\n      // const addObject= ()=>{this.materialShader =new THREE.ShaderMaterial({\n      //     extensions:{\n      //       derivatives: \"#extension GL_OES_standard_dervatives: enabled\",\n      //     },\n      //     side: THREE.DoubleSide,\n      //     uniforms:{\n      //       time: {value:0},\n      //       resolution: { value: new THREE.Vector4()},\n      //     },\n      //     transparent:true,\n      //     vertexShader: vertex,\n      //     fragmentShader: fragment\n      //   });\n      //   this.plane = new THREE.Mesh( this.materialShader);\n      //   this.scene.add(this.plane);\n      // }\n      // addObject()\n\n      const animate = () => {\n        if (!this.isPlaying) return;\n        this.time += 0.05;\n        this.materialShader.uniforms.time.value = this.time;\n        requestAnimationFrame(animate);\n        this.renderer.render(this.scene, this.camera);\n\n        if (this.scene) {\n          let rotationRad = THREE.MathUtils.degToRad(.1);\n          this.scene.rotateY(rotationRad);\n        }\n\n        light.position.set(this.camera.position.x + 10, this.camera.position.y + 10, this.camera.position.z + 10);\n        light.shadow.bias = -0.0001;\n        light.shadow.mapSize.width = 1024 * 4;\n        light.shadow.mapSize.height = 1024 * 4;\n      };\n\n      animate();\n    };\n\n    this.state = {\n      loading: this.props.loading ? true : false\n    }; //3D Scene components\n\n    this.divRef = /*#__PURE__*/React.createRef();\n    this.renderer = null;\n    this.camera = null;\n    this.scene = null;\n    this.time = 0;\n    this.isPlaying = true;\n  }\n\n  componentDidMount() {\n    this.initScene();\n  }\n\n  ConnectingLines(p1, p2) {\n    let v1 = new THREE.Vector3(p1.x, p1.y, p1.z);\n    let v2 = new THREE.Vector3(p2.x, p2.y, p2.z);\n    let points = [];\n\n    for (let i = 0; i <= 20; i++) {\n      let p = new THREE.Vector3().lerpVectors(v1, v2, i / 20);\n      p.normalize();\n      p.multiplyScalar(1 + 0.2 * Math.sin(Math.PI * i / 20));\n      points.push(p);\n    }\n\n    ;\n    const path = new THREE.BufferGeometry().setFromPoints(points);\n    const material = this.materialShader;\n    const line = new THREE.Line(path, material);\n    this.scene.add(line);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"three-container\",\n        ref: this.divRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 35\n      }, this) : '']\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/home/sourab/projects/React-JS-Three-JS-Boilerplate/src/Scenes/MainScene.component.js"],"names":["React","THREE","MetalSphere","Loading","handleSceneResize","initEventListener","OrbitControls","Coordinates","fragment","vertex","MainScene","Component","constructor","props","initScene","loadingManager","LoadingManager","onLoad","setState","loading","renderer","WebGLRenderer","antialias","alpha","setPixelRatio","window","devicePixelRatio","autoClear","setClearColor","Color","setSize","divRef","current","offsetWidth","offsetHeight","appendChild","domElement","scene","Scene","background","camera","PerspectiveCamera","position","x","controls","material","ShaderMaterial","extensions","derivatives","side","DoubleSide","uniforms","time","value","resolution","Vector4","transparent","vertexShader","fragmentShader","sphere","create","add","plane","Mesh","geometry","play","isPlaying","render","ambientLight","AmbientLight","intensity","hemiLight","HemisphereLight","directionalLight","DirectionalLight","set","light","SpotLight","castShadow","Conversion","lat","lng","phi","Math","PI","theta","sin","cos","y","z","i","length","pos","mesh","SphereBufferGeometry","MeshBasicMaterial","color","pos1","ConnectingLines","stop","animate","materialShader","requestAnimationFrame","rotationRad","MathUtils","degToRad","rotateY","shadow","bias","mapSize","width","height","state","createRef","componentDidMount","p1","p2","v1","Vector3","v2","points","p","lerpVectors","normalize","multiplyScalar","push","path","BufferGeometry","setFromPoints","line","Line"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as THREE from 'three';\nimport MetalSphere from '../Components/3D/MetalSphere.three';\nimport Loading from './../Components/Loading.component';\nimport { handleSceneResize, initEventListener } from './../Utils/sceneResize';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport {Coordinates} from '../Coordinates'\nimport fragment from '../shaders/fragment.glsl';\nimport vertex from '../shaders/vertex.glsl'\n\n\nexport default class MainScene extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: this.props.loading ? true : false,\n        }\n        //3D Scene components\n        this.divRef = React.createRef();\n        this.renderer = null;\n        this.camera = null;\n        this.scene = null;\n        this.time = 0;\n        this.isPlaying = true;\n    }\n\n    componentDidMount() {\n        this.initScene();\n    }\n    initScene = () => {\n        //init Loading Manager\n        const loadingManager = new THREE.LoadingManager();\n        loadingManager.onLoad = () => {\n            this.setState({ loading: false }, () => { })\n        }\n\n        //init Renderer\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.renderer.autoClear = false;\n        this.renderer.setClearColor(new THREE.Color(0x222222));\n        this.renderer.setSize(this.divRef.current.offsetWidth, this.divRef.current.offsetHeight);\n        this.divRef.current.appendChild(this.renderer.domElement);\n\n        //init Scene\n        this.scene = new THREE.Scene();\n        this.scene.background = new THREE.Color(0x222222);\n\n        //init Camera\n        this.camera = new THREE.PerspectiveCamera(7, this.divRef.current.offsetWidth / this.divRef.current.offsetHeight, 0.1, 1000);\n        this.camera.position.x = 30;\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n        //Metal Sphere\n        this.material =new THREE.ShaderMaterial({\n            extensions:{\n              derivatives: \"#extension GL_OES_standard_dervatives: enabled\"\n            },\n            side: THREE.DoubleSide,\n            uniforms:{\n              time: {value:0},\n              resolution: { value: new THREE.Vector4()},\n            },\n            transparent:true,\n            vertexShader: vertex,\n            fragmentShader: fragment\n          });\n        let sphere = new MetalSphere().create(loadingManager);\n        this.scene.add(sphere);\n        this.plane = new THREE.Mesh(this.geometry, this.material);\n        this.scene.add(this.plane);\n        play = () =>{\n            if(!this.isPlaying){\n              this.render()\n              this.isPlaying = true;\n            }\n        }\n        //Ambient Light\n        let ambientLight = new THREE.AmbientLight(0xFFFFFF);\n        ambientLight.intensity = 1;\n        this.scene.add(ambientLight);\n        let hemiLight = new THREE.HemisphereLight(0xffeeb1, 0x080820, 4);\n        this.scene.add(hemiLight);\n\n        //Directional Light\n        let directionalLight = new THREE.DirectionalLight(0xe8f7ff, 4);\n        directionalLight.position.set(5, 15, 70);\n        this.scene.add(directionalLight);\n        \n        //SpotLight\n        let light = new THREE.SpotLight(0xffa95c,4);\n        light.position.set(-50,50,50);\n        light.castShadow = true;\n        this.scene.add( light );\n\n        //pin\n        // let mesh = new THREE.Mesh(\n        //     new THREE.SphereBufferGeometry(0.01, 1, 1),\n        //     new THREE.MeshBasicMaterial({color:\"#fc4ee8\"})\n        // )\n        // let mesh1 = new THREE.Mesh(\n        //     new THREE.SphereBufferGeometry(0.01, 1, 1),\n        //     new THREE.MeshBasicMaterial({color:0x00ff00})\n        // )\n        \n        function Conversion(lat, lng){\n            let phi = (90-lat)*(Math.PI/180);\n            let theta = (lng+180)*(Math.PI/180);\n\n            let x = -(Math.sin(phi)*Math.cos(theta))\n            let y = (Math.sin(phi)*Math.sin(theta))\n            let z = (Math.cos(phi))\n\n            return{\n                x, y, z\n            }\n        }\n\n        // let point1 = {\n        //     lat:35.6897,\n        //     lng:139.6922\n        // }\n        // let point2 = {\n        //     lat:18.9667,\n        //     lng:72.8333\n        // }\n        for (let i = 0; i < Coordinates.length; i++) {\n            let pos = Conversion(Coordinates[i].lat, Coordinates[i].lng);\n\n            let mesh = new THREE.Mesh(\n                new THREE.SphereBufferGeometry(0.01, 1, 1),\n                new THREE.MeshBasicMaterial({color:\"#fc4ee8\"})\n            )\n            mesh.position.set(pos.x,pos.y,pos.z)\n            this.scene.add(mesh)\n            if(i<Coordinates.length-1){\n                let pos1 = Conversion(Coordinates[i+1].lat, Coordinates[i+1].lng);\n                this.ConnectingLines(pos,pos1)\n            }\n            \n        }\n\n        // let pos = Conversion(point1);\n        // let pos1 = Conversion(point2);\n        // mesh.position.set(pos.x, pos.y, pos.z)\n        // this.scene.add(mesh)\n        // mesh1.position.set(pos1.x,pos1.y,pos1.z)\n        // this.scene.add(mesh1)\n        //this.ConnectingLines(pos,pos1)\n        \n\n        //init Handle Resize\n        handleSceneResize(window, this.camera, this.renderer)\n        initEventListener(window);\n\n        //Animation Loop\n        const stop=() => {\n            this.isPlaying = false;\n          }\n          stop();\n        \n        // const \n        // play();\n        // const addObject= ()=>{this.materialShader =new THREE.ShaderMaterial({\n        //     extensions:{\n        //       derivatives: \"#extension GL_OES_standard_dervatives: enabled\",\n              \n        //     },\n         \n        //     side: THREE.DoubleSide,\n        //     uniforms:{\n        //       time: {value:0},\n        //       resolution: { value: new THREE.Vector4()},\n              \n        //     },\n        //     transparent:true,\n      \n        //     vertexShader: vertex,\n        //     fragmentShader: fragment\n        //   });\n          \n      \n        //   this.plane = new THREE.Mesh( this.materialShader);\n        //   this.scene.add(this.plane);\n        // }\n        // addObject()\n\n        const animate = () => {\n            if(!this.isPlaying) return;\n            this.time +=0.05;\n            this.materialShader.uniforms.time.value = this.time;\n            requestAnimationFrame(animate);\n            this.renderer.render(this.scene, this.camera, );\n            if (this.scene) {\n                let rotationRad = THREE.MathUtils.degToRad(.1);\n                this.scene.rotateY(rotationRad);\n               \n               \n            }\n            light.position.set( \n                this.camera.position.x + 10,\n                this.camera.position.y + 10,\n                this.camera.position.z + 10,\n              );\n              light.shadow.bias = -0.0001;\n              light.shadow.mapSize.width = 1024*4;\n              light.shadow.mapSize.height = 1024*4;\n        }\n        animate();\n    }\n \n    ConnectingLines(p1,p2){\n        let v1 = new THREE.Vector3(p1.x, p1.y, p1.z)\n        let v2 = new THREE.Vector3(p2.x, p2.y, p2.z)\n        let points = []\n        for (let i = 0; i <=20; i++) {\n            let p = new THREE.Vector3().lerpVectors(v1, v2, i/20)\n            p.normalize()\n            p.multiplyScalar(1 + 0.2*Math.sin(Math.PI*i/20)) \n            points.push(p)             \n        };\n        const path = new THREE.BufferGeometry().setFromPoints( points );\n        const material = this.materialShader\n        const line = new THREE.Line( path, material );\n        this.scene.add( line );\n    }\n    \n   \n    render() {\n        return (<>\n            <div className=\"three-container\" ref={this.divRef}></div>\n            {this.state.loading ? <Loading /> : ''}\n        </>)\n\n    }\n}"]},"metadata":{},"sourceType":"module"}